---
title: Sampling
weight: 80
---

Sampling is a process that restricts the amount of traces that are generated by
a system. The exact sampler you should use depends on your specific needs, but
in general you should make a decision at the start of a trace, and allow the
sampling decision to propagate to other services.

A [`Sampler`](https://pkg.go.dev/go.opentelemetry.io/otel/sdk/trace#Sampler) can
be set on the tracer provider using the
[`WithSampler`](https://pkg.go.dev/go.opentelemetry.io/otel/sdk/trace#WithSampler)
option, as follows:

```go
provider := trace.NewTracerProvider(
    trace.WithSampler(trace.AlwaysSample()),
)
```

[`AlwaysSample`](https://pkg.go.dev/go.opentelemetry.io/otel/sdk/trace#AlwaysSample)
and
[`NeverSample`](https://pkg.go.dev/go.opentelemetry.io/otel/sdk/trace#NeverSample)
are self-explanatory values. `AlwaysSample` means that every trace is
sampled, while `NeverSample` means that no trace is sampled. When
you're getting started, or in a development environment, use
`AlwaysSample`.

Other samplers include:

- [`TraceIDRatioBased`](https://pkg.go.dev/go.opentelemetry.io/otel/sdk/trace#TraceIDRatioBased),
  which will sample a fraction of traces, based on the fraction given to the
  sampler. Thus, if you set this to .5, half of traces will be sampled.
- [`ParentBased`](https://pkg.go.dev/go.opentelemetry.io/otel/sdk/trace#ParentBased),
  which behaves differently based on the incoming sampling decision. In general,
  this will sample spans that have parents that were sampled, and will not
  sample spans whose parents were _not_ sampled.

By default, the tracer provider uses a `ParentBased` sampler with the
`AlwaysSample`.

When you're in production, you should consider using the `ParentBased` sampler
with the `TraceIDRatioBased` sampler.
