---
title: Розширення
aliases: [/docs/instrumentation/java/extensions]
description:
  Розширення додають можливості агенту без необхідності створювати окремий
  дистрибутив.
weight: 300
default_lang_commit: e05fefe6c9f7d8b159d9a9a95128098c646c78c4
---

## Вступ {#introduction}

Розширення призначені для перевизначення або налаштування інструментування, яке надається вихідним агентом, без необхідності створювати новий дистрибутив OpenTelemetry або змінювати код агента будь-яким чином.

Розглянемо інструментований клієнт бази даних, який створює span для кожного виклику бази даних і витягує дані з підключення до бази даних для надання атрибутів span. Нижче наведені приклади використання для цього сценарію, які можна вирішити за допомогою розширень:

- _"Я не хочу цей відрізок взагалі"_:

  Створіть розширення для вимкнення вибраного інструментування, надаючи нові стандартні налаштування.

- _"Я хочу редагувати деякі атрибути, які не залежать від жодного екземпляра підключення до бази даних"_:

  Створіть розширення, яке надає користувацький `SpanProcessor`.

- _"Я хочу редагувати деякі атрибути, і їх значення залежать від конкретного екземпляра підключення до бази даних"_:

  Створіть розширення з новим інструментуванням, яке впроваджує власну пораду в той самий метод, що й оригінальне. Ви можете використовувати метод `order`, щоб забезпечити його виконання після оригінального інструментування та доповнити поточний відрізок новою інформацією.

- _"Я хочу видалити деякі атрибути"_:

  Створіть розширення з користувацьким експортером або використовуйте функціональність фільтрації атрибутів в OpenTelemetry Collector.

- _"Мені не подобаються відрізки OTel. Я хочу змінити їх і їх життєвий цикл"_:

  Створіть розширення, яке вимикає наявне інструментування та замінює його новим, яке впроваджує `Advice` в той самий (або кращий) метод, що й оригінальне інструментування. Ви можете написати свій `Advice` для цього і використовувати наявний `Tracer` безпосередньо або розширити його. Оскільки у вас є власний `Advice`, ви можете контролювати, який `Tracer` ви використовуєте.

## Приклади розширень {#extension-examples}

Щоб отримати демонстрацію, як створити розширення для агента інструментування OpenTelemetry Java, [зберіть і запустіть проєкт розширення](https://github.com/open-telemetry/opentelemetry-java-instrumentation/tree/main/examples/extension).
